<!DOCTYPE html>
<html>
<head>

<!--
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
<script src="http://localhost:4000/assets/js/mdHeaderCollapse.js"></script>
-->

<meta charset="utf-8">
<title>LECTURE 11: MATLAB - INPUT/OUTPUT (IO) &vert; COE 301 - FALL 2017 - MWF 9-10 AM - UTC 4.110</title>
<meta name="description" content="Introduction to<br>Computer Programming">
<meta name="keywords" content="">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://localhost:4000/images/logo.png">
<meta name="twitter:title" content="Lecture 11: MATLAB - Input/Output (IO)">
<meta name="twitter:description" content="Introduction to<br>Computer Programming">
<meta name="twitter:creator" content="@AmirShahmoradi">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Lecture 11: MATLAB - Input/Output (IO)">
<meta property="og:description" content="Introduction to<br>Computer Programming">
<meta property="og:url" content="http://localhost:4000/lecture/11-matlab-IO">
<meta property="og:site_name" content="COE 301 - Fall 2017 - MWF 9-10 AM - UTC 4.110">
<meta property="og:image" content="http://localhost:4000/images/">





<link rel="canonical" href="http://localhost:4000/lecture/11-matlab-IO">
<!-- <link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="COE 301 - Fall 2017 - MWF 9-10 AM - UTC 4.110 Feed"> -->


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

<link href='http://fonts.googleapis.com/css?family=Montserrat:400,700|Open+Sans:400,600,300,800,700' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="http://localhost:4000/assets/css/vendor/font-awesome.min.css">
<link rel="stylesheet" href="http://localhost:4000/assets/css/vendor/normalize.css">
<link rel="stylesheet" href="http://localhost:4000/assets/css/vendor/nprogress.css">
<link rel="stylesheet" href="http://localhost:4000/assets/css/vendor/foundation.min.css">
<link rel="stylesheet" href="http://localhost:4000/assets/css/style.css">
<link rel="stylesheet" href="http://localhost:4000/assets/css/post.css">

<!--Mathjax-->

<style TYPE="text/css">
code.has-jax {font: inherit; font-size: 100%; background: inherit; border: inherit;}
</style>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'] // removed 'code' entry
    }
});
MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<!-- Icons -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">


<!-- prism
<link href="http://localhost:4000/assets/css/prismTwilight.css" rel="stylesheet" />
<link href="http://localhost:4000/assets/css/prismDefault.css" rel="stylesheet" />
<link href="http://localhost:4000/assets/css/prismCoy.css" rel="stylesheet" />
-->
<link href="http://localhost:4000/assets/css/prismOkaidia.css" rel="stylesheet" />

<!--header anchor links-->
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

<style type="text/css">@media only screen and (min-width:43.75em){.notepad-post-content div>p:first-child:first-letter{float:left;font-size:4.688rem;line-height:4.375rem;padding-top:.25rem;padding-right:.5rem;padding-left:.188rem;font-family:serif}}</style>
</head>
<body class="post-template" itemscope itemtype="http://schema.org/WebPage">  

        <main id="notepad-post-container-simple" class="notepad-post-container-simple" role="main">
            <header class="notepad-post-header-simple">
                <div class="notepad-post-menu-header-simple">

                    <a class="notepad-blog-logo" href="http://localhost:4000" target="_blank"><img src="http://localhost:4000/images/logo.png" alt="shahmoradi.org" /></a>

                <div class="notepad-blog-menu">      
    <div class="notepad-mobile-menu show-for-small">
        <a href="#"><i class="fa fa-bars"></i></a>
    </div>
    <ul class="notepad-menu">
        <li class="notepad-mobile-close-btn show-for-small text-right">
            <a href="#"><i class="fa fa-times"></i></a>
        </li>

            <li>
                    <a href="http://localhost:4000/">Home</a>
                 </li>

            <li>
                    <a href="http://localhost:4000/highlights">Highlights</a>
                 </li>

            <li>
                    <a href="http://localhost:4000/categories">Categories</a>
                 </li>

            <li>
                    <a href="http://localhost:4000/about">About</a>
                 </li>
            
           <li><a href="http://localhost:4000/feed.xml" title="Atom/RSS feed"><i class="icon-rss"></i> Feed</a></li>
    </ul>

</div>
            </div>

                <div class="notepad-post-title-simple row">
                    <div class="small-12 columns">
                        <div class="notepad-post-meta-simple">
                            <h2>Lecture 11: MATLAB - Input/Output (IO)</h2>
                            <p>by <strong>Amir Shahmoradi</strong> &#8212;  <strong><time datetime="2017-11-08T00:00:00-06:00">08 Nov 2017</time></strong></p>
                        </div>
                    </div>
                </div>
            </header>

        
            <article class="notepad-post-content post tag-simple">
        
            <div style="text-align:justify;">
                <p>This lecture discusses topics on data Input/Output processes in MATLAB.</p>

<div class="post_toc"></div>

<!--

## Lecture Videos

This video is created solely as reference for the attendants of ICP2017F course at UT Austin. If you did not attend this class, then you may not find this video useful.

<div class="center"><div class="video-wrapper"><div class="video-container">
    <iframe width="853" height="480" src="https://www.youtube.com/embed/4Fx4ulZt0_c" frameborder="0" allowfullscreen></iframe>
</div></div></div><br>

-->

<p><br /></p>

<p>So far in this course, we have indirectly discussed several methods of getting input information from the user, and several methods of outputting the result in a MATLAB program. This lecture, attempts at formalizing all the previous discussions and introduce more general efficient methods of code interaction with users.</p>

<h2 id="methods-of-data-inputoutput-in-matlab">Methods of data input/output in MATLAB</h2>

<p>Let’s begin with an example code, explaining the meaning of input/output (I/O) in MATLAB,</p>
<pre><code class="language-python">a = 0.1;
b = 1;
x = 0.6;
y = a*exp(b*x)
</code></pre>
<pre><code>0.1822
</code></pre>

<p>In the above code, <code>a</code>, <code>b</code>, <code>x</code> are examples of input data to a code, and <code>y</code> is an example of code output. In such cases as in the above, the input data is said to be <strong>hardcoded</strong> in the program.</p>

<blockquote>
    <b>NOTE</b><br /><br />
    <b>In general, in any programming language, including MATLAB, you should avoid hardcoding input information to your program as much as possible.</b><br /><br />
    If data is hardcoded, then every time that it needs to be changed, the user has to change the content of the code. This is not considered good programming style for software development.
</blockquote>
<p><br />
In general, input data can be fed to a program in four different ways:</p>
<ol>
  <li>let the user answer questions in a dialog in <strong>MATLAB terminal window</strong>,</li>
  <li>let the user provide input on the <strong>operating system command line</strong>,</li>
  <li>let the user write input data in a <strong>graphical interface</strong>,</li>
  <li>let the user provide input data in a <strong>file</strong>.</li>
</ol>

<p>For outputting data, there are two major methods,</p>
<ul>
  <li>writing to the terminal window, as previously done using print() function, or,</li>
  <li>writing to an output file.</li>
</ul>

<p>We have already extensively discussed printing output to the terminal window. Reading from and writing data to file is also easy as we see in this lecture.</p>

<h3 id="inputoutput-from-matlab-terminal-window">Input/output from MATLAB terminal window</h3>

<p>We have already introduced and used this method frequently in previous lectures, via the MATLAB’s built-in function <code>input()</code>. If we were to get the input data for the above code via the terminal window, an example approach would be the following,</p>
<pre><code class="language-matlab">datain = input('input [a,b,c]: ');
a = datain(1);
b = datain(2);
x = datain(3);
y = a*exp(b*x)
</code></pre>
<pre><code>input a,b,c: [0.1, 1, 0.6]
y =
    0.1822
</code></pre>

<p>One could also read the input values as string ans then convert them to real values or parse the input using one of MATLAB’s built-in functions, for example,</p>
<pre><code class="language-matlab">&gt;&gt; datain = input('input [a,b,c]: ','s');
input [a,b,c]: [0.1, 1, 0.6]
&gt;&gt; class(datain)
ans =
char
&gt;&gt; datain = str2num(datain)
datain =
    0.1000    1.0000    0.6000
&gt;&gt; class(datain)
ans =
double
&gt;&gt; a = datain(1);
&gt;&gt; b = datain(2);
&gt;&gt; x = datain(3);
&gt;&gt; y = a*exp(b*x)
y =
    0.1822
</code></pre>
<p><br /></p>

<h3 id="inputoutput-data-from-operating-systems-command-line">Input/output data from operating system’s command line</h3>

<p>This approach is most popular in Unix-like environments, where most users are accustomed to using Bash command line. However, it can be readily used in <a href="https://en.wikipedia.org/wiki/Cmd.exe" target="_blank">Windows cmd</a> environment as well. For this approach, we have to invoke MATLAB from the computer operating system’s command line, that is, Bash in Linux systems, and cmd in Windows,</p>
<pre><code class="language-bash">start matlab -nosplash -nodesktop -r "testIO
</code></pre>
<p><br />
Then a MATLAB command-line window opens in your computer like the following that runs automatically your code (stored in <code>testIO.m</code>).</p>
<figure>
    <img src="http://localhost:4000/lecture/11/matlab.png" width="900" />
</figure>
<p><br />
In the above command, we are basically starting MATLAB from the OS command line with our own choice of optional arguments for MATLAB. You can specify startup options (also called <strong>command flags</strong> or <strong>command-line switches</strong>) that instruct the MATLAB program to perform certain operations when you start it. On all platforms, specify the options as arguments to the matlab command when you start at the operating system prompt. For example, the following starts MATLAB and suppresses the display of the splash screen (a splash screen is a graphical control element consisting of a window containing an image, a logo, and the current version of the software. A splash screen usually appears while a game or program is launching),</p>
<pre><code class="language-matlab">matlab -nosplash
</code></pre>
<p><br />
The flag <code>-nodesktop</code> result in opening only the MATLAB command line, and no MATLAB Graphical user interface (GUI) just like the figure above. Finally, the flag <code>-r</code> executes the MATLAB file that appears right after it, specified as a string or as the name of a MATLAB script or function. If statement is MATLAB code, you should enclose the string with double quotation marks. If statement is the name of a MATLAB function or script, <strong>do not specify the file extension</strong> and <strong>do not use quotation marks</strong>. Any required file must be on the MATLAB search path or in the startup folder. You can also set MATLAB’s working folder right from the command-line using <code>-sd</code> flag. You can find find more information about all possible flags <a href="https://www.mathworks.com/help/matlab/ref/matlabwindows.html" target="_blank">here</a>. On Windows platforms, you can precede a startup option with either a hyphen (<code>-</code>) or a slash (<code>/</code>). For example, <code>-nosplash</code> and <code>/nosplash</code> are equivalent.</p>

<p>Note that you can also quote MATLAB on the OS command line, along with the name of the script you want to run. For example, suppose you wanted to run the original script,</p>
<pre><code class="language-matlab">a = 0.1;
b = 1;
x = 0.6;
y = a*exp(b*x)
</code></pre>
<p><br />
but now with <code>a</code>, <code>b</code>, <code>x</code>, given at runtime. You could write a script file <code>test.m</code> that contains,</p>
<pre><code class="language-matlab">y = a*exp(b*x)
</code></pre>
<p><br />
and give the variables values at runtime, on OS command line, like the following,</p>
<pre><code class="language-bash">matlab -nosplash -nodesktop -r "a = 0.1; b = 1; x = 0.6; testIO"
</code></pre>
<p><br />
The figure below shows a screen-shot illustrarting the output of the above command.</p>
<figure>
    <img src="http://localhost:4000/lecture/11/matlab1.png" width="900" />
</figure>
<p><br /></p>

<h3 id="inputoutput-data-from-a-graphical-user-interface">Input/output data from a Graphical User Interface</h3>

<p>This method of inputting data is done by constructing a Graphical User Interface  (GUI) which opens and takes input from the user. This is probably one of the most convenient methods for the users to input data. You can do this in MATLAB for example by using the built-in function <code>inputdlg()</code> which creates dialog box that gathers user input. But this method of data colleciton is beyond the scope of our class.  More information about this can be found <a href="http://www.mathworks.com/help/matlab/ref/inputdlg.html" target="_blank">here</a>.</p>

<h3 id="inputoutput-data-from-file">Input/output data from file</h3>
<p>In cases where the input/output data is large, the command-line arguments and input from terminal window are not efficient anymore. In such cases, the most common approach is to let the code read/write data from a pre-existing file, the path to which is most often given to the code via the OS command line or MATLAB terminal window.</p>

<p>There are many methods of importing and exporting data to and from MATLAB, only some of which we will discuss here. For more information see <a href="https://www.mathworks.com/help/matlab/import_export/ways-to-import-text-files.html" target="_blank">here</a>, <a href="https://www.mathworks.com/help/matlab/data-import-and-export.html" target="_blank">here</a>, and <a href="https://www.mathworks.com/help/matlab/text-files.html" target="_blank">here</a>. The following table shows some of the most important import functions in MATLAB, which we will discuss here as well.</p>

<table class="center">
<caption class="title" style="padding-bottom:10px;text-align:center;">
Table of Common Methods for Importing Data from a File to MATLAB.
</caption>
<thead>
<tr>
<th><font size="4rm" color="red">Function</font></th>
<th><font size="4rm" color="red">Description</font></th>
</tr>
</thead>
<tbody>

<tr><td><code>load()       </code></td><td> Load MATLAB variables from file into MATLAB workspace</td></tr>
<tr><td><code>save()       </code></td><td> save MATLAB variables from MATLAB workspace into a MATLAB `.mat` file.</td></tr>
<tr><td><code>fscanf()     </code></td><td> Read data from text file</td></tr>
<tr><td><code>fprintf()    </code></td><td> Write data to a text file</td></tr>
<tr><td><code>dlmread()    </code></td><td> Read ASCII-delimited file of numeric data into matrix</td></tr>
<tr><td><code>dlmwrite()   </code></td><td> Write a numeric matrix into ASCII-delimited file</td></tr>
<tr><td><code>csvread()    </code></td><td> Read comma-separated value (CSV) file</td></tr>
<tr><td><code>csvwrite()   </code></td><td> Write values of a matrix into a comma-separated (CSV) file</td></tr>
<tr><td><code>xlswrite()   </code></td><td> Read Microsoft Excel spreadsheet file</td></tr>
<tr><td><code>xlswrite()   </code></td><td> write data into a Microsoft Excel spreadsheet file</td></tr>
<tr><td><code>readtable()  </code></td><td> Create table from file</td></tr>
<tr><td><code>writetable() </code></td><td> Write table to file</td></tr>
<tr><td><code>imread()     </code></td><td> Read image from graphics file</td></tr>
<tr><td><code>imwrite()    </code></td><td> Write image to graphics file</td></tr>
<tr><td><code>importdata() </code></td><td> Load data from file</td></tr>
<tr><td><code>textscan()   </code></td><td> Read formatted data from text file or string</td></tr>
<tr><td><code>fgetl()      </code></td><td> Read line from file, removing newline characters</td></tr>
<tr><td><code>fread()      </code></td><td> Read data from binary file</td></tr>
<tr><td><code>fwrite()     </code></td><td> Write data to binary file</td></tr>
<tr><td><code>type()       </code></td><td> Display contents of file</td></tr>

</tbody>
</table>
<p><br /></p>

<h4 id="loadingsaving-matlab-workspace-variables">Loading/saving MATLAB workspace variables</h4>

<p>MATLAB has two useful functions that can save the workspace variables into special MATLAB <code>.mat</code> files, to be later load again into the same or another MATLAB workspace for further work or manipulation. The function <code>save()</code> saves workspace variables to a given file. The most useful options for this function are the following,</p>
<pre><code class="language-matlab">save(filename)
save(filename,variables)
save(filename,variables,fmt)
</code></pre>
<p><br /></p>
<ul>
  <li><code>save(filename)</code> saves all variables from the current workspace in a MATLAB formatted binary file called <strong>MAT-file</strong> with the given name <code>filename</code>. If the file <code>filename</code> exists, <code>save()</code> overwrites the file.<br />
<br /></li>
  <li><code>save(filename,variables)</code> saves only the variables or fields of a structure array specified by <code>variables</code>. For example,
    <pre><code class="language-matlab">p = rand(1,10);
q = ones(10);
save('pqfile.mat','p','q')
</code></pre>
    <p><br />
will create the binary MAT file <a href="http://localhost:4000/lecture/11/pqfile.mat" target="_blank">pqfile.mat</a> which contains the two variables.<br />
<br /></p>
  </li>
  <li><code>save(filename,variables,fmt)</code> saves the requested variables with the file format specified by <code>fmt</code>. The variables argument is optional. If you do not specify variables, the save function saves all variables in the workspace. File format, specified as one of the following. When using the command form of save, you do not need to enclose the input in single or double quotes, for example, save myFile.txt -ascii -tabs.</li>
</ul>

<table class="center">
<caption class="title" style="padding-bottom:10px;text-align:center;">
Table of Common Methods for Importing Data from a File to MATLAB.
</caption>
<thead>
<tr>
<th><font size="4rm" color="red">Value of fmt</font></th>
<th><font size="4rm" color="red">File Format</font></th>
</tr>
</thead>
<tbody>

<tr><td><code>'-mat'</code></td><td>Binary MAT-file format.</td></tr>
<tr><td><code>'-ascii'</code></td><td>Text format with 8 digits of precision.</td></tr>
<tr><td><code>'-ascii','-tabs'</code></td><td>Tab-delimited text format with 8 digits of precision.</td></tr>
<tr><td><code>'-ascii','-double'</code></td><td>Text format with 16 digits of precision.</td></tr>
<tr><td><code>'-ascii','-double','-tabs'</code></td><td>Tab-delimited text format with 16 digits of precision.</td></tr>

</tbody>
</table>
<p><br /></p>

<p>For example,</p>
<pre><code class="language-matlab">p = rand(1,10);
q = ones(10);
save('pqfile.txt','p','q','-ascii')
</code></pre>
<p><br />
will create an ASCII text file <a href="http://localhost:4000/lecture/11/pqfile.txt" target="_blank">pqfile.txt</a> which contains the two variables <code>p</code> and <code>q</code>.</p>

<p>Similarly, one can reload the same files into MATLAB workspace again if needed, for example using MATLAB <code>load()</code> function,</p>
<pre><code class="language-matlab">&gt;&gt; load('pqfile.txt')
&gt;&gt; pqfile
pqfile =
  Columns 1 through 8
    0.0975    0.2785    0.5469    0.9575    0.9649    0.1576    0.9706    0.9572
    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000
    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000
    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000
    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000
    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000
    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000
    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000
    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000
    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000
    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000
  Columns 9 through 10
    0.4854    0.8003
    1.0000    1.0000
    1.0000    1.0000
    1.0000    1.0000
    1.0000    1.0000
    1.0000    1.0000
    1.0000    1.0000
    1.0000    1.0000
    1.0000    1.0000
    1.0000    1.0000
    1.0000    1.0000
</code></pre>
<p><br />
But note that upon loading the Ascii file, the information about the individual variables is lost. By contrast, loading data using the MAT file will preserve the variables structure,</p>
<pre><code class="language-matlab">&gt;&gt; load('pqfile.mat')
&gt;&gt; p
p =
  Columns 1 through 8
    0.1419    0.4218    0.9157    0.7922    0.9595    0.6557    0.0357    0.8491
  Columns 9 through 10
    0.9340    0.6787
&gt;&gt; q
q =
     1     1     1     1     1     1     1     1     1     1
     1     1     1     1     1     1     1     1     1     1
     1     1     1     1     1     1     1     1     1     1
     1     1     1     1     1     1     1     1     1     1
     1     1     1     1     1     1     1     1     1     1
     1     1     1     1     1     1     1     1     1     1
     1     1     1     1     1     1     1     1     1     1
     1     1     1     1     1     1     1     1     1     1
     1     1     1     1     1     1     1     1     1     1
     1     1     1     1     1     1     1     1     1     1
</code></pre>
<p><br /></p>

<h4 id="readingwriting-a-formatted-file-using-fscanf-and-fprintf">Reading/writing a formatted file using <code>fscanf()</code> and <code>fprintf()</code></h4>

<p>There are numerous methods of reading the contents of a file in MATLAB. The most trivial and probably least pleasing method is through MATLAB’s built-in function <code>fscanf()</code>. To read a file, say <a href="http://localhost:4000/lecture/11/data.in" target="_blank">this file</a>, you will have to first open it in MATLAB,</p>
<pre><code class="language-matlab">fileID = fopen('data.in','r');
formatSpec = '%f';
A = fscanf(fileID,formatSpec)
fclose(fileID);
</code></pre>
<pre><code>A =
    1
    3
    4
    5
    6
    7
    88
    65
</code></pre>

<p>Note that unlike the C language’s <code>fscanf()</code>, in MATLAB <code>fscanf()</code> is vectorized meaning that it can read multiple lines all at once. Here, the attribute <code>'r'</code> states that the file is opened for the purpose of reading it (vs writing, or some other purpose). A list of available options for <code>fopen()</code> are the following,</p>

<table class="center">
<caption class="title" style="padding-bottom:10px;text-align:center;">
Table of Attributes for MATLAB function <code>fopen()</code>.
</caption>
<thead>
<tr>
<th><font size="4rm" color="red">Attribute</font></th>
<th><font size="4rm" color="red">Description</font></th>
</tr>
</thead>
<tbody>

<tr><td><code>'r' </code></td><td>Open file for reading.</td></tr>
<tr><td><code>'w' </code></td><td>Open or create new file for writing. Discard existing contents, if any.</td></tr>
<tr><td><code>'a' </code></td><td>Open or create new file for writing. Append data to the end of the file.</td></tr>
<tr><td><code>'r+'</code></td><td>Open file for reading and writing.</td></tr>
<tr><td><code>'w+'</code></td><td>Open or create new file for reading and writing. Discard existing contents, if any.</td></tr>
<tr><td><code>'a+'</code></td><td>Open or create new file for reading and writing. Append data to the end of the file.</td></tr>
<tr><td><code>'A' </code></td><td>Open file for appending without automatic flushing of the current output buffer.</td></tr>
<tr><td><code>'W' </code></td><td>Open file for writing without automatic flushing of the current output buffer.</td></tr>

</tbody>
</table>
<p><br /></p>

<p>The general syntax for reading an array from an input file using <code>fscanf()</code> is the following,</p>
<pre><code class="language-matlab">array = fscanf(fid,format)
[array, count] = fscanf(fid,format,size)
</code></pre>
<p><br />
where the optional argument <code>size</code> specifies the amount of data to be read from the file. There are three versions of this argument,</p>
<ul>
  <li><code>n</code>: Reads exactly <code>n</code> values. After this statement, <code>array</code> will be a column vector containing <code>n</code> values read from the file.</li>
  <li><code>Inf</code>: Reads until the end of the file. After this statement, <code>array</code> will be a column vector containing all of the data until the end of the file.</li>
  <li><code>[n m]</code>: Reads exactly, $n\times m$ values, and format the data as an $n\times m$ array. For example, consider <a href="http://localhost:4000/lecture/11/nums2.txt" target="_blank">this file</a>, which contains two columns of numeric data. One could read this data using <code>fscanf()</code> like the following,
    <pre><code class="language-matlab">&gt;&gt; formatSpec = '%d %f';
&gt;&gt; sizeA = [2 Inf];
&gt;&gt; fileID = fopen('nums2.txt','r');
&gt;&gt; A = transpose(fscanf(fileID,formatSpec,sizeA))
&gt;&gt; fclose(fileID);
A =
  1.0000    2.0000    3.0000    4.0000    5.0000
  0.8147    0.9058    0.1270    0.9134    0.6324
</code></pre>
    <p><br />
Now suppose you perform some on operation on <code>A</code>, say the elemental multiplication of <code>A</code> by itself. Then you want to store (append) the result into another file. You can do this using MATLAB function <code>fprintf()</code>,</p>
    <pre><code class="language-matlab">&gt;&gt; formatSpec = '%d %f \n';
&gt;&gt; fileID = fopen('nums3.txt','w+');
&gt;&gt; fprintf(fileID,formatSpec,A.*A);
&gt;&gt; fclose(fileID);
</code></pre>
    <p><br />
The option <code>w+</code> tells MATLAB to store the result in a file named <a href="http://localhost:4000/lecture/11/nums3.txt" target="_blank">num3.txt</a>, and if the file does already exist, then append the result to the end of the current existing file. To see what formatting specifiers you can use with MATLAB <code>fscanf()</code> and <code>fprintf()</code>, see <a href="https://www.mathworks.com/help/matlab/ref/fprintf.html" target="_blank">this page</a>.</p>
  </li>
</ul>

<p>MATLAB also has some rules to skip characters that are unwanted in the text file. These rules are really details that are specific to your needs and the best approach is to seek the solution to your specific problem by searching MATLAB’s  manual or the web. For example, consider <a href="http://localhost:4000/lecture/11/temperature.dat" target="_blank">this file</a> which contains a set of temperature values in degrees (including the Celsius degrees symbol). One way to read this file and skipping the degrees symbol in MATLAB could be then the following set of commands,</p>
<pre><code class="language-matlab">&gt;&gt; fileID = fopen('temperature.dat','r');
&gt;&gt; degrees = char(176);
&gt;&gt; [A,count] = fscanf(fileID, ['%d' degrees 'C'])
&gt;&gt; fclose(fileID);
A =
    78
    72
    64
    66
    49
count =
     5
</code></pre>
<p><br />
This method of reading a file is very powerful but rather detailed, low-level and cumbersome, specially that you have to define the format for the content of the file appropriately. Most often, other higher-level MATLAB’s built-in function come to rescue us from the hassles of using <code>fscanf()</code>. For more information about this function though, if you really want to stick to it, see <a href="https://www.mathworks.com/help/matlab/ref/fscanf.html#buaio_v-5" target="_blank">here</a>. Some important MATLAB special characters (<strong>escape characters</strong>) that can also appear in <code>fprintf()</code> are also given in the following table.</p>

<table class="center">
<caption class="title" style="padding-bottom:10px;text-align:center;">
Table of escape characters in MATLAB.
</caption>
<thead>
<tr>
<th><font size="4rm" color="red">Symbol</font></th>
<th><font size="4rm" color="red">Effect on Text</font></th>
</tr>
</thead>
<tbody>

<tr><td><code>''</code></td><td>Single quotation mark</td></tr>
<tr><td><code>%%</code></td><td>Single percent sign</td></tr>
<tr><td><code>\\</code></td><td>Single backslash</td></tr>
<tr><td><code>\n</code></td><td>New line</td></tr>
<tr><td><code>\t</code></td><td>Horizontal tab</td></tr>
<tr><td><code>\v</code></td><td>Vertical tab</td></tr>

</tbody>
</table>
<p><br /></p>

<h4 id="readingwriting-data-using-dlmreaddlmwrite-and-csvreadcsvwrite">Reading/writing data using <code>dlmread()/dlmwrite()</code> and <code>csvread()/csvwrite()</code></h4>

<p>The methods discussed above are rather primitive, in that they require a bit of effort by the user to know something about the structure of the file and its format. MATLAB has a long list of advanced IO functions that can handle a wide variety of data file formats. Two of the most common functions are dedicated specifically to read data files containing delimited data sets: <code>csvread()</code> and <code>dlmread()</code>.</p>

<p>In the field of scientific computing, a <strong>Comma-Separated Values (CSV)</strong> data file is a type of file with extension <code>.csv</code>, which stores tabular data (numbers and text) in plain text format. Each line of the file is called a <strong>data record</strong> and each record consists of one or more <strong>fields, separated by commas</strong>. The use of the <strong>comma</strong> as a <strong>field separator</strong> is the source of the name for this file format.</p>

<p>Now suppose you wanted to read two matrices whose elements were stored in CSV format in two csv data files <a href="http://localhost:4000/lecture/11/matrix1.csv" target="_blank">matrix1.csv</a> and <a href="http://localhost:4000/lecture/11/matrix2.csv" target="_blank">matrix2.csv</a>. You can accomplish this task simply by calling MATLAB’s built-in csv-reader function called <code>csvread(filename)</code>. Here the word <code>filename</code> is the path to the file in your local hard drive. For example, download these two given csv files above in your MATLAB working directory and then try,</p>
<pre><code class="language-matlab">&gt;&gt; Mat1 = csvread('matrix1.csv');
&gt;&gt; Mat2 = csvread('matrix2.csv');
</code></pre>
<p><br />
Then suppose you want to multiply these two vectors and store the result in a new variable and write it to new output csv file. You could do,</p>
<pre><code class="language-matlab">Mat3 = Mat1 * Mat2;
&gt;&gt; csvwrite('matrix3.csv',Mat3)
</code></pre>
<p><br />
which would output <a href="http://localhost:4000/lecture/11/matrix3.csv" target="_blank">this file: matrix3.csv</a> for you.</p>

<p>Alternatively, you could also use MATLAB’s built-in functions <code>dlmread()</code> and <code>dlmwrite()</code> functions to do the same things as above. These two functions read and write ASCII-delimited file of numeric data. For example,</p>
<pre><code class="language-matlab">&gt;&gt; Mat1 = dlmread('matrix1.csv');
&gt;&gt; Mat2 = dlmread('matrix2.csv');
&gt;&gt; Mat3 = Mat1 * Mat2;
&gt;&gt; dlmwrite('matrix3.dat',Mat3);
</code></pre>
<p><br />
Note that, <code>dlmread()</code> and <code>dlmwrite()</code> come with an optional argument <code>delimiter</code> of the following format,</p>
<pre><code class="language-matlab">&gt;&gt; dlmread(filename,delimiter)
&gt;&gt; dlmwrite(filename,matrixObject,delimiter)
</code></pre>
<p><br />
where the argument <code>delimiter</code> is the <strong>field delimiter character</strong>, specified as a character vector or string. For, example in the above case, the delimiter is comma <code>','</code>. In other cases, you could for example use white space <code>' '</code>, or <code>'\t'</code> to specify a tab delimiter, and so on. For example, you could have equally written,</p>
<pre><code class="language-matlab">&gt;&gt; dlmwrite('matrix4.dat',Mat3,'\t');
</code></pre>
<p><br />
to create a tab-delimited file named <a href="http://localhost:4000/lecture/11/matrix4.csv" target="_blank">matrix4.dat</a>.</p>

<h4 id="readingwriting-data-using-xlsread-and-xlswrite">Reading/writing data using <code>xlsread()</code> and <code>xlswrite()</code></h4>

<p>Once data becomes more complex than simple numeric matrices or vectors, then we need more complex MATLAB functions for IO. An example of such case, is when you have stored your information in Microsoft Excel file. For such cases, you can use <code>xlsread(filename)</code> to read the file specified by the input argument <code>filename</code> to this function. We will later on see some example usages of this function in homework. Similarly, you could write data into an excel file using <code>xlswrite()</code>. For example,</p>
<pre><code class="language-matlab">&gt;&gt; values = {1, 2, 3 ; 4, 5, 'x' ; 7, 8, 9};
&gt;&gt; headers = {'First','Second','Third'};
&gt;&gt; xlswrite('XlsExample.xlsx',[headers; values]);
</code></pre>
<p><br />
would create this <a href="http://localhost:4000/lecture/11/XlsExample.xlsx" target="_blank">Microsoft Excel file</a> for you.</p>

<h4 id="readingwriting-data-using-readtable-and-writetable">Reading/writing data using <code>readtable()</code> and <code>writetable()</code></h4>

<p>Another important and highly useful set of MATLAB functions for IO are <code>readtable()</code> and <code>writetable()</code>. The function <code>readtable()</code> is used to read data into MATLAB in the form of a MATLAB table data type. For example, you could read the same Excel file that we created above into MATLAB using <code>readtable()</code> instead of <code>xlsread()</code>,</p>
<pre><code class="language-matlab">&gt;&gt; XlsTable = readtable('XlsExample.xlsx')
XlsTable = 
    First    Second    Third
    _____    ______    _____

    1        2         '3'  
    4        5         'x'  
    7        8         '9'  
</code></pre>
<p><br /></p>

<h4 id="reading-and-writing-image-files-using-imread-and-imwrite">Reading and writing image files using <code>imread()</code> and <code>imwrite()</code></h4>

<p>MATLAB has a really wide range of input/output methods of data. We have already discussed some of the most useful IO approaches in the previous sections. For graphics files however, none of the previous functions are useful. Suppose you wanted to import a <strong>jpg</strong> or <strong>png</strong> or some other type graphics file into MATLAB in order to further process it. For this purpose MATLAB has the built-in function <code>imread()</code> which can read image from an input graphics file. For example, to read <a href="http://localhost:4000/lecture/11/homer.jpg" target="_blank">this image file</a> in MATLAB, you could do,</p>
<pre><code class="language-matlab">&gt;&gt; homer = imread('homer.jpg');
&gt;&gt; imshow(homer)
</code></pre>
<p><br />
to get the following figure in MATLAB,</p>

<figure>
	<img src="http://localhost:4000/lecture/11/homerScreenShot.png" width="900" />
</figure>

<p>Now suppose you want to convert this figure to black-and-white and save it as a new figure. You could do,</p>
<pre><code class="language-matlab">&gt;&gt; homerBW = rgb2gray(homer);
&gt;&gt; imshow(homerBW)
&gt;&gt; imwrite(homerBW,'homerBW.png');
</code></pre>
<p><br />
to get this <a href="http://localhost:4000/lecture/11/homerBW.png" target="_blank">black and white version of the above image</a>, now in <strong>png</strong> format (or in any format you may wish, that is also supported by MATLAB).</p>

<h4 id="reading-a-file-using-importdata">Reading a file using <code>importdata()</code></h4>

<p>Probably, the most general MATLAB function for data input is <code>importdata()</code>. This function can be used to import almost any type of data and MATLAB is capable of automatically recognizing the correct format for reading the file, based on its extension and content. For example, you could read the same image file above, using <code>importdata()</code>,</p>
<pre><code class="language-matlab">&gt;&gt; newHomer = importdata('homer.jpg');
&gt;&gt; imshow(newHomer)
</code></pre>
<p><br />
to import it to MATLAB. At the same time, you could also use it to import data from the excel file that we created above, <a href="http://localhost:4000/lecture/11/XlsExample.xlsx" target="_blank">XlsExample.xlsx</a>,</p>
<pre><code class="language-matlab">&gt;&gt; newXls = importdata('XlsExample.xlsx')
newXls = 
          data: [3x3 double]
      textdata: {3x3 cell}
    colheaders: {'First'  'Second'  'Third'}
</code></pre>
<p><br />
or similarly, read a csv-delimited file like <a href="http://localhost:4000/lecture/11/matrix3.csv" target="_blank">matrix3.csv</a>,</p>
<pre><code class="language-matlab">&gt;&gt; newMat3 = importdata('matrix3.csv')
newMat3 =
  Columns 1 through 7
       62774      103230       77362       87168       65546       64837      100700
      104090      143080      104700      116500      108250      105400      111110
       80351      112850       89506      113890      106030       70235      110620
       99522      134130       73169      134190      117710       92878       94532
       59531      102750       91679      111350       80539       84693       96078
       58504       76982       52076       91449       80797       69246       61569
       76170      104310       93950      114860       89779      101530       87014
       91610      118380       90636      107840       91120       90247       84871
       85943      110670       73451      114410      100840      111660       77908
       82570       94427       57213       81175       79305       78718       68662
  Columns 8 through 10
       79446       78102      106570
      102950      116850      137810
      113210      108800      128700
       93013      119130      132700
       95750      100980      100450
       67044       80635       78006
       86355      103760      119710
       92649       98589      132660
       73117      109270       99401
       65283       66888      114030
</code></pre>
<p><br />
In general, you can use <code>importdata()</code> to read MATLAB binary files (MAT-files), ASCII files and Spreadsheets, as well as images and audio files.</p>

<h4 id="reading-a-file-using-fgetl">Reading a file using <code>fgetl()</code></h4>

<p>Another useful MATLAB function for reading the content of a file is <code>fgetl()</code> which can read a file line by line, removing the new line characters <code>\n</code> from the end of each line. The entire line is read as a string. For example, consider <a href="http://localhost:4000/lecture/11/text.txt" target="_blank">this file</a>. One could read the content of this text file using the function <code>fgetl()</code> like the following,</p>
<pre><code class="language-matlab">&gt;&gt; fid = fopen('text.txt');
&gt;&gt; line = fgetl(fid)  % read line excluding newline character
line =
The main benefit of using a weakly-typed language is the ability to do rapid prototyping. The number of lines of code required to declare and use a dynamically allocated array in C (and properly clean up after its use) are much greater than the number of lines required for the same process in MATLAB.
&gt;&gt; line = fgetl(fid)  % read line excluding newline character
line =
     ''
&gt;&gt; line = fgetl(fid)  % read line excluding newline character
line =
Weak typing is also good for code-reuse. You can code a scalar algorithm in MATLAB and with relatively little effort modify it to work on arrays as well as scalars. The fact that MATLAB is a scripted instead of a compiled language also contributes to rapid prototyping.
&gt;&gt; fclose(fid);
</code></pre>
<p><br /></p>

<!--

https://www.mathworks.com/help/matlab/matlab_prog/use-trycatch-to-handle-errors.html
https://www.mathworks.com/help/matlab/ref/try.html
https://www.mathworks.com/help/matlab/ref/error.html
https://www.mathworks.com/help/matlab/ref/assert.html

#### Handling IO errors

```matlab
```
<br>
Reading a data file using `dlmread()` and `csvread()`

-->

<p><br /><br /></p>

            </div>
        </article>
        <div class="cf"></div>
<div class="row text-center">
    <section class="notepad-post-share">
        <a class="twitter-icon" href="https://twitter.com/intent/tweet?text=&quot;Lecture 11: MATLAB - Input/Output (IO)&quot;%20http://localhost:4000/lecture/11-matlab-IO%20via%20&#64;AmirShahmoradi"
            onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
            <i class="fa fa-twitter"></i>
        </a>
        <a class="facebook-icon" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/lecture/11-matlab-IO"
            onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
            <i class="fa fa-facebook"></i>
        </a>
        <a class="google-icon" href="https://plus.google.com/share?url=http://localhost:4000/lecture/11-matlab-IO"
           onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title="Share on Google+">
            <i class="fa fa-google-plus"></i>
        </a>
    </section>
</div>
        <div class="cf"></div>
        
<div class="notepad-author-info">
    <div class="row">
        <section class="notepad-post-author small-12 columns">
            <a href="http://www.shahmoradi.org" target="_blank">
                <img src="http://localhost:4000/images/logo.png" class="notepad-post-author-avatar" alt="Amir Shahmoradi's photo">
            </a>
            <span class="author-label">Author</span>
            <h1>Amir Shahmoradi</h1>
            <p><a href="mailto:amir@ices.utexas.edu" class="author-website">amir@ices.utexas.edu</a></p>
            <p>Genius is 99% perspiration and 1% inspiration</p>
        </section>
    </div>
</div> 
        
        <div class="cf"></div>
        
        <section class="notepad-disqus row">
    <div class="small-12 columns">
        <h1 class="notepad-comments-header">Comments</h1>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'shahmoradi'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
</section>

        <div class="cf"></div>

    <footer class="notepad-site-footer">
    <div class="copyright">
         <!-- <section>Last updated 2017 / 11 / 07</section></br> -->
         <section>Last updated Tuesday, 07 Nov 2017 at 11:23 PM CST</section></br>
         <section>All content exclusively maintained by <a href="http://shahmoradi.org" target="_blank">Amir Shahmoradi</a> <!-- &copy;--> </section></br>
         <section><a class="icon-ghost" href="http://www.ae.utexas.edu/" target="_blank">Department of Aerospace Engineering and Engineering Mechanics</a></section></br>
         <section><a class="icon-ghost" href="https://www.ices.utexas.edu/" target="_blank">Institute for Computational Engineering and Sciences | POB 6.328</a></section></br>
         <section><a class="icon-ghost" href="http://www.utexas.edu/" target="_blank">The University of Texas at Austin</a></section></br>
         <section>201 E 24th Street, Stop C0200</section></br>
         <section>Austin, TX 78712-1229</section>
    </div>
    <div class="social-icons">
        
        
        <a href="http://twitter.com/AmirShahmoradi" target="_blank">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x fa-inverse"></i>
                <i class="fa fa-twitter fa-stack-1x"></i>
            </span>
        </a>
        
        
        
        
        <a href="http://github.com/shahmoradi" target="_blank">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x fa-inverse"></i>
                <i class="fa fa-github fa-stack-1x"></i>
            </span>
        </a>
        
        
    </div>
    
    <div class="cf"></div>
</footer> 
</main>    
<!--dynamic page header-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.11.1.min.js"><\/script>')</script>
  <script src="http://localhost:4000/assets/js/vendor/modernizr.js"></script>
  <script src="http://localhost:4000/assets/js/foundation.min.js"></script>
  
  <script src="http://localhost:4000/assets/js/notepad.js"></script>
  <script src="http://localhost:4000/assets/js/scripts.min.js"></script>
  <script src="http://localhost:4000/assets/js/vendor/nprogress.js"></script>
  
  <script>
    $(document).foundation();
  </script>
  <script type='text/javascript'>console.log("N/A");</script>
  <script type='text/javascript'>console.log("http://www.shahmoradi.org/");</script>

<!--header anchor links-->
<script src="http://localhost:4000/assets/js/autoAnchorLink.js"></script>

<!-- <script src="http://localhost:4000/assets/js/prismOkaidia.js"></script>
<script src="http://localhost:4000/assets/js/prismTwilight.js"></script>
<script src="http://localhost:4000/assets/js/prismDefault.js"></script>
 -->
<script src="http://localhost:4000/assets/js/prismCoy.js"></script>

<!-- Start of Google Analytics Code for Default Guide -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-67460905-1', 'auto');
    ga('send', 'pageview');
  </script>
<!-- End of Google Analytics Code for Default Guide -->


<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=11495316; 
var sc_invisible=0; 
var sc_security="70939fec"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="Web Analytics"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="//c.statcounter.com/11495316/0/70939fec/0/" alt="Web
Analytics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->

<!-- For Shahmoradi.org: Start of StatCounter Code for Default Guide
  <script type="text/javascript">
    var sc_project=10611821; 
    var sc_invisible=1; 
    var sc_security="902e4bb4"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="shopify visitor
    statistics" href="http://statcounter.com/shopify/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/10611821/0/902e4bb4/0/"
    alt="shopify visitor statistics"></a></div></noscript>
For Shahmoradi.org: End of StatCounter Code for Default Guide --> 
<!--automatic Table of Content.-->
<script src="http://localhost:4000/assets/js/autoTOC.js"></script>
</body>
</html>
